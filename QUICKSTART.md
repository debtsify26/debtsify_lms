# üöÄ Debtsify - Quick Start Guide

Complete guide to get Debtsify running with both frontend and backend.

## Overview

Debtsify is a full-stack loan management application:
- **Frontend**: React + TypeScript + Vite (runs on port 3000)
- **Backend**: Python + FastAPI + Supabase (runs on port 8000)

---

## Part 1: Frontend Setup (Already Done! ‚úÖ)

Your frontend is already running on http://localhost:3000

To restart it if needed:
```bash
npm run dev
```

---

## Part 2: Backend Setup

### Step 1: Create Supabase Project

1. Go to **https://supabase.com** and sign up/login
2. Click **"New Project"**
3. Fill in:
   - **Name**: debtsify (or any name)
   - **Database Password**: Choose a strong password
   - **Region**: Choose closest to you
4. Click **"Create new project"** and wait 2-3 minutes

### Step 2: Get Supabase Credentials

Once your project is ready:

1. Go to **Settings** (gear icon) ‚Üí **API**
2. Copy these values:
   - **Project URL** (looks like: `https://xxxxx.supabase.co`)
   - **anon/public key** (under "Project API keys")
   - **service_role key** (under "Project API keys" - click "Reveal")

### Step 3: Set Up Database Schema

1. In Supabase Dashboard, click **SQL Editor** (left sidebar)
2. Click **"New query"**
3. Open `backend/schema.sql` in your code editor
4. Copy the ENTIRE contents and paste into Supabase SQL Editor
5. Click **"Run"** (or press Ctrl+Enter)
6. You should see "Success. No rows returned"
7. Verify: Click **Table Editor** - you should see tables: `users`, `loans`, `installments`, `transactions`

### Step 4: Install Backend Dependencies

Open a **NEW terminal** (keep frontend running), then:

```powershell
# Navigate to backend directory
cd d:\debtsify\debtsify\backend

# Run the automated setup script
.\setup.ps1
```

This will:
- ‚úÖ Check Python installation
- ‚úÖ Create virtual environment
- ‚úÖ Install all dependencies
- ‚úÖ Create .env file
- ‚úÖ Generate SECRET_KEY

### Step 5: Configure Environment Variables

1. Open `backend/.env` in your editor
2. Replace the placeholder values:

```env
# From Supabase Dashboard > Settings > API
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your_anon_public_key_here
SUPABASE_SERVICE_KEY=your_service_role_key_here

# Generated by setup script - already filled in
SECRET_KEY=already_generated_by_setup_script
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# API Configuration (leave as is)
API_HOST=0.0.0.0
API_PORT=8000

# Frontend URL (leave as is)
CORS_ORIGINS=http://localhost:3000

# Environment (leave as is)
ENVIRONMENT=development

# Optional: For AI features
GEMINI_API_KEY=your_gemini_api_key_if_you_have_one
```

3. Save the file

### Step 6: Run the Backend

In the backend terminal (with venv activated):

```bash
python main.py
```

You should see:
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     Application startup complete.
```

‚úÖ **Backend is now running!**

Test it: Open http://localhost:8000/docs (FastAPI Swagger UI)

---

## Part 3: Verify Everything Works

### Backend Health Check

Open browser: http://localhost:8000/health

Should show:
```json
{
  "status": "healthy",
  "environment": "development"
}
```

### API Documentation

Open: http://localhost:8000/docs

You should see all API endpoints with interactive documentation.

### Test Signup

1. In Swagger UI (http://localhost:8000/docs)
2. Find **POST /auth/signup**
3. Click **"Try it out"**
4. Fill in:
```json
{
  "email": "test@example.com",
  "password": "password123",
  "full_name": "Test User"
}
```
5. Click **"Execute"**
6. You should get a response with `access_token`

### Verify in Supabase

1. Go to Supabase Dashboard ‚Üí **Authentication**
2. You should see your test user listed
3. Go to **Table Editor** ‚Üí **users** table
4. You should see the user profile created

---

## Part 4: Connect Frontend to Backend (Next Step)

Currently, your frontend uses localStorage. To connect it to the backend:

1. Update frontend to call backend API endpoints
2. Add authentication (login/signup screens)
3. Store JWT token in localStorage
4. Use token for authenticated requests

Would you like me to:
- **A)** Create the frontend integration code now?
- **B)** Keep frontend as-is and use both separately?
- **C)** Create a migration tool to move localStorage data to backend?

---

## Current Status

‚úÖ Frontend running on http://localhost:3000  
‚úÖ Backend running on http://localhost:8000  
‚úÖ Database set up in Supabase  
‚è≥ Frontend ‚ÜîÔ∏è Backend integration (next step)

---

## Troubleshooting

### Backend won't start

**Error: "No module named 'fastapi'"**
- Solution: Make sure virtual environment is activated
  ```bash
  cd backend
  .\venv\Scripts\Activate.ps1
  pip install -r requirements.txt
  ```

**Error: "Failed to connect to Supabase"**
- Solution: Check your SUPABASE_URL and SUPABASE_KEY in `.env`
- Verify the Supabase project is active in dashboard

**Error: "CORS error" in browser**
- Solution: Make sure CORS_ORIGINS in `.env` includes `http://localhost:3000`
- Restart the backend after changing `.env`

### Database Issues

**Error: "relation does not exist"**
- Solution: Run `schema.sql` again in Supabase SQL Editor
- Make sure you ran the ENTIRE schema file

**Error: "User not found after signup"**
- Solution: Check RLS policies are created (run schema.sql)
- Check Supabase logs in Dashboard ‚Üí Logs

### Frontend Issues

**Blank screen**
- Solution: Already fixed! Make sure http://localhost:3000 shows the app

**Can't access backend API**
- Solution: Make sure backend is running on port 8000
- Check browser console for CORS errors

---

## What's Next?

1. ‚úÖ **Backend is ready** - All API endpoints working
2. ‚úÖ **Database is ready** - Supabase tables created
3. üîÑ **Integration** - Connect frontend to backend (ready when you are!)

Let me know when you're ready to integrate the frontend with the backend! üöÄ
